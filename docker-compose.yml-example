services:
  withings:
    build: .
    ports:
      - "5000:5000"   # webhook listener for bed events
      - "8000:8000"   # OAuth authorization helper
    environment:
      - CLIENT_ID=${CLIENT_ID}
      - CLIENT_SECRET=${CLIENT_SECRET}
      - APP_URL=${APP_URL}
      - BEDIN_URL=${BEDIN_URL}
      - BEDOUT_URL=${BEDOUT_URL}
      - TOKEN_FILE=/tokens.json
    volumes:
      - tokens:/tokens.json

volumes:
  tokens:
